@page
@model Car_Rental.Pages.BookingModel
@{
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Car Booking</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
          rel="stylesheet" />
    <style>
        body {
            background-color: #f8f9fa;
        }

        .booking-container {
            max-width: 800px;
            margin: 30px auto;
            padding: 20px;
            background: #fff;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        .form-label {
            font-weight: bold;
        }

        .btn-primary {
            background-color: #ffc107; /* Bootstrap warning yellow */
            border-color: #ffc107;
            color: black; /* Ensures text is readable */
        }

            .btn-primary:hover {
                background-color: #6c757d; /* Bootstrap grey */
                border-color: #6c757d;
                color: white; /* Changes text color on hover for contrast */
            }
    </style>
</head>
<body>
    <div class="container booking-container">
        <h2 class="text-center mb-4">Book Your Car</h2>
        <form action="/submit-booking" method="POST">
            <div class="mb-3">
                <label for="carSelection" class="form-label">Select a Car</label>
                <select class="form-select" id="carSelection" name="car" onchange="calculatePrice()">
                    <option value="Nessan Sunny" data-price="50">Economy - Nessan Sunny</option>
                    <option value="Renault Bgan" data-price="55">Economy - Renault Bgan</option>
                    <option value="Chevorlet Optra" data-price="60">Economy - Chevorlet Optra</option>
                    <option value="Kia Rio" data-price="65">Economy - Kia Rio</option>
                    <option value="Mitsubishi Mirage" data-price="70">Economy - Mitsubishi Mirage</option>
                    <option value="Tyota Yaris" data-price="75">Economy - Tyota Yaris</option>
                    <option value="Honda lwit" data-price="80">Economy - Honda lwit</option>
                    <option value="Mitsubishi Pajero" data-price="100">4X4 - Mitsubishi Pajero</option>
                    <option value="Toyota Land Cruiser" data-price="120">4X4 - Toyota Land Cruiser</option>
                    <option value="Range Rover" data-price="150">4X4 - Range Rover</option>
                    <option value="Jeep Grand Cherokee" data-price="130">4X4 - Jeep Grand Cherokee</option>
                    <option value="Tyota 4Runner" data-price="140">4X4 - Tyota 4Runner</option>
                    <option value="Nissan Patrol" data-price="135">4X4 - Nissan Patrol</option>
                    <option value="Ford Branco" data-price="125">4X4 - Ford Branco</option>
                    <option value="KIA Tellceride" data-price="145">4X4 - KIA Tellceride</option>
                    <option value="Suzuki Swift" data-price="55">Economy - Suzuki Swift</option>
                    <option value="Mercedes E2OO" data-price="200">Luxury - Mercedes E2OO</option>
                    <option value="Mercedes S450" data-price="250">Luxury - Mercedes S450</option>
                    <option value="BMW 520 I" data-price="220">Luxury - BMW 520 I</option>
                    <option value="MG RX5" data-price="230">Luxury - MG RX5</option>
                    <option value="Mclaren" data-price="300">Luxury - Mclaren</option>
                    <option value="Porsche 911" data-price="350">Luxury - Porsche 911</option>
                    <option value="Maserati Quattroporte" data-price="330">Luxury - Maserati Quattroporte</option>
                    <option value="Lamparghini" data-price="400">Luxury - Lamparghini</option>
                    <option value="Rolls-Royce Ghost" data-price="500">Luxury - Rolls-Royce Ghost</option>
                    <option value="Audi R8" data-price="450">Luxury - Audi R8</option>
                </select>
            </div>

            <div class="mb-3">
                <label for="startDate" class="form-label">Start Date</label>
                <input type="date"
                       class="form-control"
                       id="startDate"
                       name="start_date"
                       onchange="calculatePrice()"
                       required />
            </div>

            <div class="mb-3">
                <label for="endDate" class="form-label">End Date</label>
                <input type="date"
                       class="form-control"
                       id="endDate"
                       name="end_date"
                       onchange="calculatePrice()"
                       required />
            </div>

            <!-- Price Display -->
            <div class="mb-3">
                <label for="totalPrice" class="form-label">Total Price</label>
                <input type="text" id="totalPrice" class="form-control" readonly />
            </div>

            <button type="submit" class="btn btn-primary w-100">
                Confirm Booking
            </button>
        </form>
    </div>

    <!-- Bootstrap JS (Optional) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        function calculatePrice() {
            const carSelect = document.getElementById("carSelection");
            const startDate = document.getElementById("startDate");
            const endDate = document.getElementById("endDate");

            if (carSelect.selectedIndex === -1 || !startDate.value || !endDate.value) {
                return; // Prevent calculation if any field is missing
            }

            // Get car price from data-price attribute
            const carPrice = parseFloat(carSelect.options[carSelect.selectedIndex].getAttribute("data-price"));

            // Parse start and end dates
            const start = new Date(startDate.value);
            const end = new Date(endDate.value);

            // Calculate the number of days between start and end date
            const timeDiff = end - start;
            const days = timeDiff / (1000 * 3600 * 24);

            if (days < 1) {
                document.getElementById("totalPrice").value = "Invalid dates";
                return;
            }

            // Calculate total price
            const totalPrice = carPrice * days;
            document.getElementById("totalPrice").value = totalPrice.toFixed(2) + " EGP"; // Change the currency symbol to EGP
        }
    </script>

</body>
</html>

